<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;June Skeeter &amp; CAPACITY">

<title>Open Source GIS - Using QGIS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Open Source GIS</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">What is GIS?</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Using_QGIS.html" aria-current="page">
 <span class="menu-text">Using QGIS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./GIS_With_Python.html">
 <span class="menu-text">Doing GIS with Python</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#downlodading-qgis" id="toc-downlodading-qgis" class="nav-link active" data-scroll-target="#downlodading-qgis">Downlodading QGIS</a></li>
  <li><a href="#setting-up-a-project" id="toc-setting-up-a-project" class="nav-link" data-scroll-target="#setting-up-a-project">1 Setting up a Project</a>
  <ul class="collapse">
  <li><a href="#downloading-the-data" id="toc-downloading-the-data" class="nav-link" data-scroll-target="#downloading-the-data">Downloading the Data</a></li>
  <li><a href="#opening-qgis" id="toc-opening-qgis" class="nav-link" data-scroll-target="#opening-qgis">Opening QGIS</a></li>
  </ul></li>
  <li><a href="#adding-data" id="toc-adding-data" class="nav-link" data-scroll-target="#adding-data">2 Adding Data</a>
  <ul class="collapse">
  <li><a href="#importing-a-.shp-file" id="toc-importing-a-.shp-file" class="nav-link" data-scroll-target="#importing-a-.shp-file">Importing a .shp file</a></li>
  <li><a href="#importing-a-.csv-file" id="toc-importing-a-.csv-file" class="nav-link" data-scroll-target="#importing-a-.csv-file">Importing a .csv file</a></li>
  </ul></li>
  <li><a href="#reprojecting-a-layer" id="toc-reprojecting-a-layer" class="nav-link" data-scroll-target="#reprojecting-a-layer">3. Reprojecting a layer</a></li>
  <li><a href="#point-in-polygon-analysis" id="toc-point-in-polygon-analysis" class="nav-link" data-scroll-target="#point-in-polygon-analysis">4. Point in Polygon Analysis</a></li>
  <li><a href="#calculate-a-new-field" id="toc-calculate-a-new-field" class="nav-link" data-scroll-target="#calculate-a-new-field">5. Calculate a New Field</a></li>
  <li><a href="#make-a-map" id="toc-make-a-map" class="nav-link" data-scroll-target="#make-a-map">6. Make a Map</a>
  <ul class="collapse">
  <li><a href="#add-the-map" id="toc-add-the-map" class="nav-link" data-scroll-target="#add-the-map">Add the Map</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using QGIS</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;June Skeeter &amp; CAPACITY </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="downlodading-qgis" class="level2">
<h2 class="anchored" data-anchor-id="downlodading-qgis">Downlodading QGIS</h2>
<p>We’ll be working with the latest version of QGIS: v 3.28.3 which you can download <a href="https://www.qgis.org/en/site/">here</a>.</p>
<ul>
<li>Set QGIS up <strong>before</strong> attending the workshop if you’d like to follow along.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src=".\images/QGIS_Download.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">QGIS</figcaption><p></p>
</figure>
</div>
</section>
<section id="setting-up-a-project" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-a-project">1 Setting up a Project</h2>
<section id="downloading-the-data" class="level3">
<h3 class="anchored" data-anchor-id="downloading-the-data">Downloading the Data</h3>
<p>Click <a href="./Data/Workshop_Data.zip" download="">here</a> to download the data for the workshop. Extract the data to your project folder.</p>
<ul>
<li><strong>Tip</strong>: I like to start every project in a “clean directory”.
<ul>
<li>Create a folder called “GIS_Workshop” in your working directory. This can be any directory, just make sure you remember where it is! In this example, I’m working in C:</li>
<li>Create another folder within that called “Data” - this can be where you save all the data for a project</li>
</ul></li>
<li>You can then extract the .zip file you downloaded to “GIS_Workshop"</li>
</ul>
<p><img src="images/Extract_1.png" height="350"></p>
</section>
<section id="opening-qgis" class="level3">
<h3 class="anchored" data-anchor-id="opening-qgis">Opening QGIS</h3>
<p>You can then open QGIS, which will create an new “untitled” project. Click Project&gt;Save in the top left, and save the project in “base” of your new project directory.</p>
<ul>
<li>Don’t save in the data folder. You want your project file to be in the first thing you see when you open a your project.</li>
</ul>
<p><img src="images/Save_1.png" class="img-fluid" width="850"></p>
</section>
</section>
<section id="adding-data" class="level2">
<h2 class="anchored" data-anchor-id="adding-data">2 Adding Data</h2>
<p>You should be able to find your project folder in the directory browser.</p>
<ul>
<li>Expand the <strong>Data</strong> folder so you can see the contents.</li>
</ul>
<p><img src="images/Browser.png" height="450"></p>
<section id="importing-a-.shp-file" class="level3">
<h3 class="anchored" data-anchor-id="importing-a-.shp-file">Importing a .shp file</h3>
<p>Try clicking on BC_subDivs_2022.shp and dragging it to your layers tab.</p>
<ul>
<li>If you get an error message, take note of what it says, but ignore it for now.</li>
</ul>
<p><img src="images/Add_SHP.gif" height="450"></p>
<p>It is <strong>very</strong> important to check what coordinate system your data layers are in when import a new layer.</p>
<ul>
<li>This is the first thing you should do each time you import a layer.</li>
</ul>
<p><img src="images/Check_Projection.gif" height="450"></p>
</section>
<section id="importing-a-.csv-file" class="level3">
<h3 class="anchored" data-anchor-id="importing-a-.csv-file">Importing a .csv file</h3>
<p>The point data (police involved deaths) is stored in a different format. To import it, you must go to <strong>Layers&gt;Add Layer&gt;Add Delimited Text Layer</strong>. If you try to drag it onto the map the same way you did with the .shp file, it won’t show anything.</p>
<ul>
<li><strong>csv</strong>: comma separated value format is a tabular data format with values separated by commas. This isn’t a spatial data format, <em>though it can contain spatial data</em>. We just need to go through some extra steps to make it work.
<ul>
<li>This file has numerous columns, including point locations (Lat/Long)</li>
<li>We need to specify the coordinates (x,y data) and coordinate system (WGS 1984) when importing our data</li>
</ul></li>
<li>If you did the import correctly, the new layer should appear overtop the old, even though the are in different coordinate systems.
<ul>
<li>This is know as “project on the fly”</li>
</ul></li>
</ul>
<p><video src="images/CSV_Import.mp4" height="450" controls=""><a href="images/CSV_Import.mp4">Video</a></video></p>
</section>
</section>
<section id="reprojecting-a-layer" class="level2">
<h2 class="anchored" data-anchor-id="reprojecting-a-layer">3. Reprojecting a layer</h2>
<p>The PID layer is showing point locations that are recorded in Latitude and Longitude using the WGS 1984 coordinate system. This is different than the BC Albers Equal Area projection we are using for the census data layer (BC_subDivs_2022). Its best practice to ensure <strong>all</strong> data layers are <strong>always</strong> in the <strong>same</strong> projection before doing anything else.</p>
<ul>
<li>Processes may still run when the layers have different coordinate systems, but the results will be less accurate and the processing will take longer because the software will have to reproject layers on the fly.
<ul>
<li>It is easier to just reproject the data <strong>once</strong>.</li>
</ul></li>
<li>Search the <strong>Processing Toolbox</strong> for the <strong>Reproject</strong> function
<ul>
<li>Reprojecting will create a new layer in the desired coordinate system.</li>
<li>Make sure to reproject the <strong>PID_Locations</strong> layer</li>
<li>Make sure to put it in the <strong>BC Albers</strong> projection</li>
</ul></li>
<li>You can then remove the old PID_locations layer as we don’t need it anymore</li>
<li>You can also change the point style to help make sure things are more visible</li>
</ul>
<p><video src="images/Reproject.mp4" height="450" controls=""><a href="images/Reproject.mp4">Video</a></video></p>
</section>
<section id="point-in-polygon-analysis" class="level2">
<h2 class="anchored" data-anchor-id="point-in-polygon-analysis">4. Point in Polygon Analysis</h2>
<p>A common task in GIS is to count how many points are contained in a given polygon. QGIS has a simple tool for that and we’ll use it to count how many police involved deaths there have been per census subdivision.</p>
<ul>
<li>This will create a new layer, with a “NUMPOINTS” column that will tell us how many PID there were in each subdivision.
<ul>
<li>Open the attribute table to see the new column</li>
</ul></li>
<li>Remove the old layer, and change the symbology of the new layer to show the number of incidents per subdivision
<ul>
<li>You can use the “Natural Breaks” classification method.</li>
</ul></li>
</ul>
<p><video src="images/Point_in_Poly.mp4" height="450" controls=""><a href="images/Point_in_Poly.mp4">Video</a></video></p>
</section>
<section id="calculate-a-new-field" class="level2">
<h2 class="anchored" data-anchor-id="calculate-a-new-field">5. Calculate a New Field</h2>
<p>The number of police involved deaths in a subdivision will be strongly correlated with the <strong>total population</strong>. We can normalize by population and calculate the PID rate to reveal new patterns in the dataset.</p>
<ul>
<li><p>Open the attribute table then open the field calculator</p></li>
<li><p>Use the expression window to define the expression: <span class="math display">\[ 'NUMPOINTS' / 'Pop\_Total' * 10000 \]</span></p></li>
<li><p>This will give us the rate of police involved deaths <strong>per 10,000 residents</strong></p>
<ul>
<li>Note, the rate is over the full period of record. To get it per year, you would need to divide by length of the record as well</li>
</ul></li>
</ul>
<p><video src="images/Normalize.mp4" height="450" controls=""><a href="images/Normalize.mp4">Video</a></video></p>
</section>
<section id="make-a-map" class="level2">
<h2 class="anchored" data-anchor-id="make-a-map">6. Make a Map</h2>
<p>There are <strong>many</strong> options for creating a map layout in QGIS. Far too much to cover here. But to get started, if you’d like to experiment on your own, you can create a new map layout. Hovering over the buttons in the layout window + searching on google can give you hints on what to do.</p>
<p><img src="images/New_Layout.png" height="450"></p>
<section id="add-the-map" class="level3">
<h3 class="anchored" data-anchor-id="add-the-map">Add the Map</h3>
<p>Once you have the layout window open, you can add a new map frame, legend, title, and any other necessary elements.</p>
<p><video src="images/AddMap.mp4" height="450" controls=""><a href="images/AddMap.mp4">Video</a></video></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>